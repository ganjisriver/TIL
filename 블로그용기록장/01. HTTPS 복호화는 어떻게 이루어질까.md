# [λ„¤νΈμ›ν¬] HTTPμ™€ HTTPSμ λ™μ‘κ³Όμ •(Feat. SSL, DNS)

<br>

#### :date: λ‚ μ§: 2023-10-18

<br>

### :question: μ΄ μ£Όμ λ¥Ό νƒν• μ΄μ 

- λ¬Έλ“, HTTPμ™€ HTTPSλ” ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„ κ°„ λ°μ΄ν„° μ „μ†΅μ΄ λ°μƒν•  λ•, λ°μ΄ν„°λ¥Ό μ•”νΈν™” ν•΄μ£Όλ”μ§€μ— λ€ν• μ°¨μ΄λΌκ³  λ“¤μ—λ‹¤. HTTPSλ” ν†µμ‹  κ·μ•½μΈλ°, λ‘κ°™μ€ λ°©μ‹μΌλ΅ μ•”νΈν™”, λ³µνΈν™”λ¥Ό ν•κ² λλ‹¤λ©΄ μ–΄μ°¨ν”Ό μ¤‘κ°„μ— κ°€λ΅μ±„μ‚¬λμ΄ λ³µνΈν™”λ¥Ό ν•κ² λλ©΄ λ‘κ°™μ€κ±° μ•„λ‹κ°€? λΌλ” μƒκ°μ΄ λ“¤μ—λ‹¤. κ·Έλμ„ HTTPSμ μ•”,λ³µνΈν™”κ°€ μ–΄λ–»κ² μ΄λ£¨μ–΄μ§€λ”μ§€ μ¤‘μ‹¬μΌλ΅ μ•μ•„λ³΄κ³  μ‹¶μ–΄μ΅λ‹¤.

<br>

> ### HTTPμ™€ HTTPSμ μ •μ
> 
> <br>
> 
> `HTTP`
> 
> - μΈν„°λ„· μƒμ—μ„ μ •λ³΄λ¥Ό μ£Όκ³  λ°›κΈ° μ„ν• ν”„λ΅ν† μ½(μ•½μ†)
> 
> - ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„ μ‚¬μ΄μ— μ΄λ£¨μ–΄μ§€λ” μ”μ²­κ³Ό μ‘λ‹µμ κ³Όμ •μ„ λ‹΄λ” ν”„λ΅ν† μ½
> 
> - HTTPSμ™€μ μ°¨μ΄λ” μ•”νΈν™” λμ§€ μ•μ€ μƒνƒλ΅ λ°μ΄ν„°λ¥Ό μ£Όκ³  λ°›λ” λ‹¤λ” μ μ΄λ‹¤.
> 
> <br>
> 
> `HTTPS`
> 
> - λ³΄μ•μ΄ κ°•ν™”λ HTTP
> 
> - μ”μ²­, μ‘λ‹µ λ°μ΄ν„°λ¥Ό μ£Όκ³  λ°›κΈ° μ „μ— ν•΄λ‹Ή λ°μ΄ν„°λ“¤μ„ μ•”νΈν™”ν•μ—¬ μ κ³µν•μ—¬ λ³΄μ•μ„ λ†’μΈλ‹¤.

<br>

> ### HTTP λ™μ‘ κ³Όμ •

<br>

1. **ν΄λΌμ΄μ–ΈνΈ URL μ£Όμ†λ¥Ό μ…λ ¥ λ° DNS μ„λ²„λ¥Ό ν†µν•΄ IPλ¥Ό νλ“**
   
   > ### DNS λ™μ‘ κ³Όμ •
   > 
   > κΈ°λ³Έμ μΌλ΅ http μ”μ²­μ΄ λ°μƒν•  λ• λ§λ‹¤, DNS μ„λ²„μ— IPλ¥Ό μ”μ²­ν•λ” κ³Όμ •μ„ κ±°μΉκ² λλ©΄, μ¤λ²„ν—¤λ“κ°€ κ³Όλ„ν•κ² λ°μƒν•  κ²ƒμ΄λ‹¤. κ·Έλμ„, λΈλΌμ°μ €λ” μμ£Ό λ°©λ¬Έν•λ” μ‚¬μ΄νΈλ” DNS μΊμ‹λ¥Ό ν†µν•΄ IPλ¥Ό μ €μ¥ν•μ—¬ DNS μ„λ²„λ¥Ό ν†µν•λ” μ¤λ²„ν—¤λ“λ¥Ό μµμ†ν™” ν•λ‹¤.
   > 
   > <br>
   > 
   > **λΈλΌμ°μ €κ°€ DNS μΊμ‹λ¥Ό μ°Ύλ” κ³Όμ •μ€ λ‹¤μκ³Ό κ°™λ‹¤.**
   > 
   > <br>
   > 
   > 1. **λΈλΌμ°μ € λ‚΄λ¶€ μΊμ‹λ¥Ό ν™•μΈ**
   >    
   >     -> μ΄μ „μ— λΈλΌμ°μ €μ—μ„ λ°©λ¬Έν• μ‚¬μ΄νΈμΈμ§€ ν™•μΈν•λ” μ μ°¨
   >    
   >    <br>
   > 
   > 2. **μ΄μμ²΄μ  λ‚΄λ¶€ μΊμ‹ ν™•μΈ** 
   >    
   >    -> λΈλΌμ°μ €μ— μ—†λ” λ„λ©”μΈμ΄λ©΄, μ΄μμ²΄μ  λ‚΄λ¶€μ— μλ” DNS μΊμ‹μ— ν•΄λ‹Ή λ„λ©”μΈμ΄ λ“±λ΅λμ–΄ μλ”μ§€ ν™•μΈν•λ‹¤.
   >    
   >    <br>
   > 
   > 3. **λΌμ°ν„° μΊμ‹ ν™•μΈ** 
   >    
   >    -> OS μΊμ‹μ— μΌμΉν•λ” DNS κΈ°λ΅μ΄ μ—†λ‹¤λ©΄ λΌμ°ν„°λ„ DNS κΈ°λ΅μ„ μΌμ‹μ μΌλ΅ λ³΄κ΄€ν•¨.
   >    
   >    <br>
   > 
   > 4. **ISP μΊμ‹ ν™•μΈ**
   > 
   > *ISP(Internet Service Provider): μΈν„°λ„· μ„λΉ„μ¤ μ κ³µ μ£Όμ²΄(ex. KT, LG, SKT λ“±)
   > 
   > μ”μ²­ν• URLμ΄ μΊμ‹μ— μ—†μΌλ©΄ ISPμ DNS serverκ°€ μ¬κ·€μ μΌλ΅ λ„λ©”μΈμ„ μ°Ύλ”λ‹¤.
   > 
   > <br>
   > 
   > <img title="" src="../images/01-1.DNSμ¬κ·€λ™μ‘μ‚¬μ§„.png" alt="" width="479">
   > 
   > <br>
   > 
   > **π“ λ„λ©”μΈ μ•„ν‚¤ν…μ³ (Domain Architecture)**
   > 
   > > β€Ά λ£¨νΈ λ„λ©”μΈ (**Root**Β Domain)Β  Β ex. "."Β   
   > > β€Ά μµμƒμ„ λ„λ©”μΈ (TLD :Β **Top Level**Β Domain)Β  Β ex. "edu", "org", "gov", "com", "au"  
   > > β€Ά 2μ°¨ λ„λ©”μΈ (**Second Level**Β Domain)Β  Β ex. "openoffice.org", "expedia.gov", "microsoft.com"  
   > > β€Ά 3μ°¨ λ„λ©”μΈ (**Third Level**Β Domain)Β  Β ex. "www.openoffice.org", "download.microsoft.com"
   > 
   > <br>
   > 
   > μ΄λ ‡κ² μ£Όμ†μ°½μ— μ…λ ¥ν• λ„λ©”μΈμ„ IPμ£Όμ†λ΅ λ³€ν™ν•κ³ , μ΄λ¥Ό ν†µν•΄ ν•΄λ‹Ή μ„λ²„μ™€ TCP μ—°κ²°μ„ μ‹μ‘ν•λ‹¤.
   
   <br>

2. **μ›Ή μ„λ²„μ™€ TCP μ—°κ²° μ‹λ„ (3-way handshaking)μ„ ν†µν•΄ ν†µμ‹  μ—°κ²° μλ¦½, μ†μΌ“ κ°λ°©μ§„ν–‰**
   
   - μ°λ¦¬κ°€ μ•κ³  μλ” 3-way-handshaking κ³Όμ •μ„ ν†µν•΄ μ„λ²„μ™€ ν†µμ‹  κ°€λ¥ μ—¬λ¶€λ¥Ό ν™•μΈν•κ³  μ—°κ²° μ¤€λΉ„λ¥Ό ν•λ‹¤. 
   
   <br>

3. **ν΄λΌμ΄μ–ΈνΈκ°€ μ„λ²„μ—κ² μ”μ²­ (Request)**
   
   κ·Έ μ΄ν›„μ— μ°λ¦¬κ°€ μ•κ³  μλ” HTTPμ μ‘λ‹µκ°μ²΄λ¥Ό μ£Όκ³  λ°›λ” κ³Όμ •μ΄ λ‚μ¨λ‹¤.
   
   urlμ— https://www.google.comμ„ μ³¤μ„ λ• μ „μ†΅ν•λ” Request λ©”μ‹μ§€
   
   ![](../images/01-2.HTTP_μ”μ²­λ©”μ‹μ§€.png)
   
   <br>

4. **μ„λ²„λ” ν΄λΌμ΄μ–ΈνΈμ—κ² μ‘λ‹µ (Response)**
   
   λΈλΌμ°μ €κ°€ ν•΄λ‹Ή κ°μ²΄λ¥Ό λ³΄eλ‚΄λ©΄ μ„λ²„μ—μ„ μ£Όλ” μ‘λ‹µ κ°μ²΄λ¥Ό λ°›κ² λλ‹¤.
   ![](../images/01-3.HTTP_μ‘λ‹µλ©”μ‹μ§€.png)
   
   <br>

5. **μ—°κ²° μΆ…λ£ (4-way handshaking)**
   
   - λΈλΌμ°μ €μ™€ μ„λ²„κ°€ μ‘λ‹µμ„ μ£Όκ³  λ°›μ•κΈ° λ•λ¬Έμ—, 4-way-handshaking κ³Όμ •μ„ ν†µν•΄ μ—°κ²°μ„ μΆ…λ£ν•λ‹¤.
   
   <br>

6. **ν΄λΌμ΄μ–ΈνΈλ” μ‘λ‹µμ„ κΈ°λ°ν•μ—¬ μ›Ή λ¬Έμ„ μ¶λ ¥**
   
   - μ„λ²„λ΅ λ¶€ν„° λ°›μ€ μ‘λ‹µ λ©”μ‹μ§€λ¥Ό ν†µν•΄ λΈλΌμ°μ €λ” htmlκ³Ό cssλ¥Ό λ λ”λ§ν•κ³  μλ°”μ¤ν¬λ¦½νΈλ¥Ό ν†µν•΄ μ΄λ²¤νΈλ¥Ό λ°μƒμ‹ν‚¨λ‹¤. μ΄ κ³Όμ •μ„ λ°λ³µν•λ©΄μ„ λΈλΌμ°μ €μ™€ μ›Ήκ³Όμ TCP/IP ν†µμ‹ μ΄ μ§€μ†μ μΌλ΅ μ΄λ£¨μ–΄μ§„λ‹¤.
   
   <br>

> ### κ·Έλ ‡λ‹¤λ©΄ HTTPSλ”?
> 
> **HTTPμ™€μ μ°¨μ΄λ” three-way handshake κ³Όμ •μ—μ„ SSL μΈμ¦μ„ μ‹λ„ν•λ‹¤.**
> 
> μ„μ—μ„ ν™•μΈν• κ²ƒμ²λΌ TCP μ—°κ²°μ€ μ—°κ²° μ‹μ‘ν•  λ•, 3-way-handshakingμ„ ν†µν•΄ μ—°κ²° μƒνƒκ°€ μ •μƒμΈμ§€ ν™•μΈ ν•λ‹¤. HTTPSλ” μ„μ—μ„ μ„¤λ…ν• HTTPμ—°κ²° κ³Όμ • μ¤‘ 3-way-handshakingμ—μ„ μ„λ²„μ— μλ” ssl μΈμ¦μ„λ¥Ό ν™•μΈν•κ³ , μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈ Session Keyλ¥Ό ν™μ©ν•΄ λ°μ΄ν„° μ•”λ³µνΈν™”λ¥Ό μ”μ²­ν•λ‹¤.

<br>

> ### SSL μΈμ¦μ„ μ•κΈ° μ„ν•΄ λ¨Όμ € μ•μ•„μ•Όν•  λ€μΉ­ν‚¤, κ³µκ°ν‚¤
> 
> `λ€μΉ­ν‚¤`
> 
> - μ•”νΈν™”μ™€ λ³µνΈν™”μ— μ‚¬μ©ν•λ” ν‚¤κ°€ κ°™μ„ κ²½μ° μ΄λ¥Ό λ€μΉ­ν‚¤ λ°©μ‹μ΄λΌκ³  ν•λ‹¤.
> 
> - μμ‹ μμ™€ μ†΅μ‹ μκ°€ κ°™μ€ ν‚¤λ¥Ό κ°–κΈ° λ•λ¬Έμ—, λ‘ λ‹¤ κ³µμ ν‚¤λ¥Ό κ°€μ Έμ•Όν•λ‹¤. λν•, λ€μΉ­ν‚¤λ¥Ό μ „λ‹¬ν•λ” κ³Όμ •μ—μ„ μ μ¶ν•κ² λλ©΄, λ°μ΄ν„° λ³΄μ•μ— μ„ν—μ΄ λ°μƒν•κ² λλ‹¤.
> 
> `κ³µκ°ν‚¤(λΉ„λ€μΉ­ν‚¤)`
> 
> - κ³µκ°ν‚¤λ” λ€μΉ­ν‚¤μ λ‹¨μ μ„ λ³΄μ™„ν•λ” λ°©μ‹μ΄λ‹¤.
> 
> - λ€μΉ­ν‚¤μ™€ λ°λ€λ΅, μ•”νΈν™”μ™€ λ³µνΈν™”μ— μ‚¬μ©ν•λ” ν‚¤κ°€ λ‹¤λ¥΄λ‹¤.
> 
> - κ³µκ°ν‚¤ λ°©μ‹μ€ λ‘ κ°μ ν‚¤λ¥Ό κ°–κ³  μλ‹¤. λ‘ κ°μ ν‚¤λ¥Ό κ°κ° Aν‚¤μ™€ Bν‚¤λΌκ³  κ°€μ •μ„ ν•λ‹¤λ©΄, Aν‚¤λ΅ μ•”νΈν™”λ λ°μ΄ν„°λ¥Ό Bν‚¤λ΅ λ³µνΈν™” ν•  μ μκ³ , Bν‚¤λ΅ μ•”νΈν™”λ λ°μ΄ν„°λ” Aν‚¤λ΅ λ³µνΈν™”ν•  μ μλ‹¤. 
>   
>   λΈλΌμ°μ €λ” Aν‚¤λ¥Ό κ°–κ³  λ°μ΄ν„°λ¥Ό λ³µνΈν™”ν•κ² λλ©΄, Bν‚¤λ” μ„λ²„λ§μ΄ κ°–κ³  μκΈ° λ•λ¬Έμ—, ν•΄μ»¤μ— μν•΄ λΈλΌμ°μ €κ°€ μ κ³µν• λ°μ΄ν„°λ¥Ό νƒμ·¨λ‹Ήν•λ”λΌλ„, ν•΄μ»¤λ” λ°μ΄ν„°λ¥Ό λ³µνΈν™”λ¥Ό ν•  μ μ—†λ‹¤.
> 
> - μλ¬Έμ 
>   
>   - μ΄ λ°©μ‹μ—μ„λ” Aν‚¤λ¥Ό μ•κ³  μλ” ν•΄μ»¤κ°€ μ‘λ‹µ λ°μ΄ν„°λ¥Ό νƒμ·¨ν•λ©΄, κ·Έλ€λ΅ λ°μ΄ν„°λ¥Ό νƒμ·¨λ‹Ήν•  μ μμ§€ μ•μ„κΉ λΌλ” μλ¬Έμ μ΄ μƒκΈ΄λ‹¤.

<br>

> ### Handshaking κ³Όμ •μ—μ„ SSLμΈμ¦μ„ ν™•μΈν•λ” κ³Όμ •
> 
> 1. ν΄λΌμ΄μ–ΈνΈλ” λλ¤λ°μ΄ν„° μƒμ„±ν•μ—¬ μ„λ²„ μ „λ‹¬(Client Hello λ‹¨κ³„)
> 
> 2. μ„λ²„μΈ΅μ—μ„ μƒμ„±ν• λ¬΄μ‘μ„ λ°μ΄ν„°μ™€ ν•΄λ‹Ή μ„λ²„ μΈμ¦μ„λ¥Ό μ‹¤μ–΄μ„ ν΄λΌμ΄μ–ΈνΈμ—κ² λ³΄λƒ„(Server Hello λ‹¨κ³„)
> 
> 3. λΈλΌμ°μ €μ— λ‚΄μ¥λ CAμ •λ³΄λ΅ μ„λ²„ μΈμ¦μ„λ¥Ό λΉ„λ€μΉ­ν‚¤ μ‹μ¤ν…μ„ ν†µν•΄ ν™•μΈ
>    
>    3-1 λΈλΌμ°μ €μ— μ €μ¥λ CAμ κ³µκ°ν‚¤λ΅ μΈμ¦μ„ λ³µνΈν™”
>    
>    3-2  λ§μ•½ λ³µνΈν™”κ°€ λμ§€ μ•λ”λ‹¤λ©΄ μ •μƒμ μΈ μ„λ²„ μΈμ¦μ„κ°€ μ•„λ‹μΌλ΅ λΈλΌμ°μ € μ£Όμ†μ°½μ— Not secureλΈ
>    
>    3-3 λ³µνΈν™”κ°€ λλ‹¤λ©΄, Server Hello λ‹¨κ³„μ—μ„ ν•¨κ» λ°›μ•„μ¨ ssl μΈμ¦μ„λ¥Ό ν†µν•΄ pre master secret ν‚¤ μƒμ„±ν•λ‹¤. 
> 
> 4. μΈμ¦μ„μ— μλ” κ³µκ°ν‚¤λ΅ pre master secret keyλ¥Ό μ•”νΈν™”ν•΄μ„ μ„λ²„λ΅ λ³΄λƒ„
> 
> 5. μ„λ²„λ” μμ‹ μ λΉ„κ³µκ° ν‚¤λ΅ λ³µνΈν™”
> 
> 6. ν΄λΌμ΄μ–ΈνΈμ™€ λ§μ°¬κ°€μ§€λ΅ session key μƒμ„±
> 
> 7. μ΄ν›„ μ„λ΅ μ£Όκ³ λ°›λ” λ©”μ‹μ§€λ” λ€μΉ­ν‚¤λ΅ λ³΄μ•μ μ§€
> 
> **μ¦‰, HTTPSμ λ³΄μ• ν†µμ‹  κ³Όμ •μ€ μ„μ—μ„ μ–ΈκΈ‰ν• κ³µκ°ν‚¤λ¥Ό ν†µν•΄ λ€μΉ­ν‚¤λ¥Ό λ§λ“¤μ–΄ μ‚¬μ©ν•λ‹¤.**
> 
> CA: Certification Authorityμ μ•½μ–΄λ΅, μΈμ¦ κΈ°κ΄€μ„ μλ―Έν•λ‹¤.
> 
> ![](../images/01-4.SSL_μΈμ¦κ³Όμ •.png)

<br>

> ### μλ¬Έμ 
> 
> ### :question: λΈλΌμ°μ €λ” λ°›μ€ μΈμ¦μ„κ°€ CAμ— μν•΄ λ°κΈ‰λ κ²ƒμΈμ§€ ν™•μΈμ„ μ–΄λ–»κ² ν•λ”κ°€?
> 
> - λΈλΌμ°μ €λ” μΈμ¦λ CA λ¦¬μ¤νΈμ™€ κ³µκ°ν‚¤λ¥Ό λΈλΌμ°μ €μ— μ €μ¥ν•λ‹¤. κ·Έλ ‡κΈ° λ•λ¬Έμ—, μ„λ²„κ°€ λΈλΌμ°μ €μ— λ“±λ΅λ CAμ μΈμ¦μ„λ¥Ό ν™μ©ν•΄ SSL μΈμ¦μ„λ¥Ό λ°κΈ‰ν–λ‹¤λ©΄, λΈλΌμ°μ €λ” SSL μΈμ¦μ„λ¥Ό λ°›μ„ λ•, μ΄λ¥Ό λ‚΄λ¶€μ—μ„ νƒμƒ‰ν• ν›„μ— ν•΄λ‹Ήν•λ” μΈμ¦μ„κ°€ μλ‹¤λ©΄, μ΄λ¥Ό κ³µκ°ν‚¤λ΅ ν™μ© ν•λ‹¤.
> 
> κ·Έ μ™Έλ΅ μ¶”κ°€ λμ—μΌλ©΄ ν•λ” λ‚΄μ©μ΄ μμΌλ©΄ λ§μ”€ν•΄μ£Όμ„Έμ”.

<br>

> ### μ°Έκ³  μλ£

https://velog.io/@narcoker/λ„¤νΈμ›ν¬-HTTPμ™€-HTTPS-λ™μ‘-κ³Όμ • - HTTPμ™€ HTTPS λ™μ‘ κ³Όμ •  μ”μ•½ μ„¤λ…

https://velog.io/@kti0940/HTTPS-SSL-λ³µνΈν™”λ”-μ–΄λ””μ„-μ§„ν–‰λ κΉ - HTTPS SSL λ³µνΈν™” μ„¤λ…

https://wayhome25.github.io/cs/2018/03/11/ssl-https/ - SSL λ™μ‘ κ³Όμ • μ„¤λ…

[HTTPS ν†µμ‹ κ³Όμ • μ‰½κ² μ΄ν•΄ν•κΈ° #5(CA, μΈμ¦κΈ°κ΄€)](https://aws-hyoh.tistory.com/59) - CA(μΈμ¦κΈ°κ΄€) μ„¤λ…

[HTTPSμ™€ SSL μΈμ¦μ„ - μƒν™μ½”λ”©](https://opentutorials.org/course/228/4894) -μƒν™μ½”λ”© μ νλΈ SSL μΈμ¦μ„ μ„¤λ… 

https://www.cloudflare.com/ko-kr/learning/ssl/what-is-a-session-key/ - cloudflare ν™νμ΄μ§€ μ„Έμ…ν‚¤ μ„¤λ… 

https://www.cloudflare.com/ko-kr/learning/ssl/what-happens-in-a-tls-handshake/ - cloudflare - TLS(SSL) handshake μ„¤λ…

[HTTP λ©”μ‹μ§€ - dodeon](https://dodeon.gitbook.io/study/kimyounghan-http-basic/03-http-basic/message) - HTTP λ©”μ‹μ§€ κµ¬μ΅° 
