# 2023-12-07

### Melon 데이터 가져오는 MelonChartController

### Value가 Null을 가져오는 문제

- 어제 csv파일을 임포트하는 과정에서 csv 파일의 경로를 static Filed에 @Value 어노테이션으로 적용을 하려고 했는데, 자꾸 Null이 뜨는 문제가 발생했다.  필드에 직접 값을 선언하면 적용이 되는데, 어노테이션을 활용해 가져오려고하면 null을 띄워서 오류를 자꾸 준다.

- [@Value 어노테이션 null이 나오는 문제 해결 방법](https://wildeveloperetrain.tistory.com/143)

- 원인
  
  - @Value 어노테이션은 스프링 빈으로 등록된 객체에 apllication.yaml에 있는 설정을 주입하는데, 내가 만든 객체가 Bean으로 등록되지 않아 Value 어노테이션을 통해 주입이 되지 않는 것 같다.
  
  - 분명 해당 클래스는 @Component 어노테이션을 통해 빈으로 주입을 시켜줬다. 하지만, 나는 init() 메서드에 @PostConstruct 어노테이션을 달아서, 해당 객체가 생성될 때, 실행되는 메서드를 적용시켰다.
  
  - 스프링 컨테이너에 들어가는 객체는 우리가 만든 객체를 활용하는 프록시객체가 들어가게 되는데, 아마 스프링 컨테이너에 들어가기 전, 프록시 객체를 만들기위해 호출이 될 때, 해당 메서드가 실행되었기 때문에, 스프링 컨테이너 내부에 들어가는 Bean 객체가 아닌, 그 객체 그대로 사용된 것 때문에, Value 어노테이션이 적용되지 않았던 것 같다.

- 해결시도 
  
  - 오늘은 해결을 못했다....
  
  - InitializingBean 인터페이스를 상속받아서 넣어보고, PostConstruct를 써보기도 했지만 계속 value안에 값은 null이 나왔다. 혹시나해서 설정 파일명과 일치하지 않는가 확인해봤지만, 여전히 문제가 발생했다.
  
  - 우선은 데이터 자체는 들어갔으니 당장 해야할 작업을 하고, 추후에 한번 디버깅해봐야겠다. 해결하게 되면 스프링 컨테이너의 라이프사이클에 대해 더 잘 알게될 것이다. 이 정도 클래스 커스텀은 할 줄알아야 스프링 백엔드 개발자일테니까



### Slice 반환 시 오류 발생

- Slice를 반환시 오류를 반환하는건지 모르겠지만, 일반적으로 템플릿 엔진을 사용했을 때의 오류가 발생헀다.

- 
