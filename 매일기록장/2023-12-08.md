# 2023-12-08



### 중계테이블의 과한 데이터

- DB에 들어가는 DB양 자체가 Bill이라는 의안 데이터가 약 3만 개, 의원 데이터는 약 300개 정도이다. 의안 테이블에 공동 발의자라는 필드가 있는데, 이를 의원 테이블과 함께, 중계 테이블을 만들었는데, 한 의안 데이터의 공동 발의자가 평균적으로 10명정도 된다.

- 그래서 해당 테이블을 조회했을 때, 28만여개의 데이터가 나왔고, 처음 마이그레이션을 할 때, 시간이 해당 테이블을 만들지 않았을 때는 2~30초 가량이 나왔는데에 비해, 해당 테이블에 데이터를 넣을 때 약 25분정도의 시간이 걸렸다. 60배정도의 시간이 걸렸다는 것인데, 이렇게 데이터의 양이 많을 때, 어떻게 조회 성능을 높일 것인가에 대한 고민이 있다. 그리고, 데이터를 마이그레이션할 때 시간을 단축할 방법이 있을까라는 고민도 존재한다.

- 반정규화를 할지 여러가지 고민이 된다.

- ![](C:\Users\ganjisriver\AppData\Roaming\marktext\images\2023-12-08-18-54-41-image.png)



### Slice 객체의 오류

- 어제 고민이 많았던 Slice 객체에 대해서, Slice 객체를 컨트롤러에서 반환하게 해주면 오류가 발생하는데, 이를 Dto를 생성하여 해결해보려고 한다.

- https://velog.io/@do_ng_iill/Spring-Pagination
  
  - 이건 Querydsl을 사용한 Slice 객체 사용, 참조한 참고자료도 많아서 공부가 많이 될듯 

- 결국 QueryDSL을 이용해서 동적으로 쿼리가 작동되게 해야할 것 같다.

- 아직 쿼리에 대한 이해가 확실히 부족한 것이 느껴져서, 내일 쿼리 공부를 더 하고, 프로젝트도 더 진행해야할 것 같다.

- 너무 어렵다...
